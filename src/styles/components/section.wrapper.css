/* =========================================================================================
   FILE: src/styles/components/section.wrapper.css
   SCOPE: Wrapper container mode for Section (simple centered container alternative to rails)
   REQ: Load AFTER src/styles/components/section.css
   ========================================================================================= */

@layer components {

  /* --------------------------------------
     WRAPPER MODE - Simple Centered Container
     Usage: <Section container="wrapper" />

     Alternative to dual rail system for editorial/content-heavy sections.
     Renders everything inside a single centered container.
  --------------------------------------- */

  /* Default wrapper sizing via CSS custom properties */
  [data-clean-root="true"] .section[data-container="wrapper"] {
    --wrapper-max: var(--rail-content);           /* Default: 1200px */
    --wrapper-gutter: clamp(50px, 5vw, 80px);     /* Spaces-style gutter (wider than rail-gutter) */
  }

  /* Main wrapper container - matches .content-wrapper pattern */
  [data-clean-root="true"] .section[data-container="wrapper"] .section__wrapper {
    max-width: var(--wrapper-max);
    margin: 0 auto;
    padding-inline: var(--wrapper-gutter);
  }

  /* --------------------------------------
     ALIGNMENT WITHIN WRAPPER
  --------------------------------------- */

  /* Header alignment */
  [data-clean-root="true"] .section[data-container="wrapper"] .section__header[data-align="center"] {
    text-align: center;
    margin-inline: auto;
  }

  [data-clean-root="true"] .section[data-container="wrapper"] .section__header[data-align="left"] {
    text-align: left;
    margin-inline: 0;
  }

  [data-clean-root="true"] .section[data-container="wrapper"] .section__header[data-align="right"] {
    text-align: right;
    margin-inline: auto 0;
  }

  /* Content alignment - properly handle alignment in wrapper mode */
  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="center"] {
    text-align: center;
  }
  
  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="center"] > * {
    margin-inline: auto;
  }

  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="left"] {
    text-align: left;
  }

  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="right"] {
    text-align: right;
  }
  
  /* Ensure block-level children can center properly */
  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="center"] > div,
  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="center"] > article,
  [data-clean-root="true"] .section[data-container="wrapper"] .section__content[data-align="center"] > section {
    margin-inline: auto;
  }

  /* Actions alignment (already uses flexbox justify-content from base) */
  [data-clean-root="true"] .section[data-container="wrapper"] .section__actions[data-align="center"] {
    justify-content: center;
  }

  [data-clean-root="true"] .section[data-container="wrapper"] .section__actions[data-align="left"] {
    justify-content: flex-start;
  }

  [data-clean-root="true"] .section[data-container="wrapper"] .section__actions[data-align="right"] {
    justify-content: flex-end;
  }

  /* --------------------------------------
     VARIANT COMPATIBILITY
     Stackable variants work the same in wrapper mode
  --------------------------------------- */

  /* header-center-wide: removes max-width clamp on header */
  [data-clean-root="true"] .section[data-container="wrapper"][data-variant~="header-center-wide"] .section__header {
    max-width: none;
  }

  /* lead-full-width: removes 48ch constraint on lead text */
  [data-clean-root="true"] .section[data-container="wrapper"][data-variant~="lead-full-width"] .section__lead {
    max-width: none;
  }

  /* tone-auto-inherit: ensures color inheritance */
  [data-clean-root="true"] .section[data-container="wrapper"][data-variant~="tone-auto-inherit"][data-tone="auto"] {
    color: inherit;
  }

  /* box-sizing-content: override to content-box if needed */
  [data-clean-root="true"] .section[data-container="wrapper"][data-variant~="box-sizing-content"] .section__wrapper,
  [data-clean-root="true"] .section[data-container="wrapper"][data-variant~="box-sizing-content"] * {
    box-sizing: content-box;
  }

  /* --------------------------------------
     PRESET VARIANTS FOR WRAPPER MODE
  --------------------------------------- */

  /* spaces-2024: exact Spaces component measures (1200px + larger gutter) */
  [data-clean-root="true"] .section[data-variant~="spaces-2024"][data-container="wrapper"] {
    --wrapper-max: 1200px;
    --wrapper-gutter: clamp(50px, 5vw, 80px);
  }

  /* content-wrapper-compat: adds .content-wrapper class behavior for perfect Spaces compatibility */
  [data-clean-root="true"] .section[data-variant~="content-wrapper-compat"][data-container="wrapper"] .section__wrapper {
    /* Override to match .content-wrapper exactly */
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 clamp(50px, 5vw, 80px);
  }

  /* Ensure children can center themselves within the wrapper */
  [data-clean-root="true"] .section[data-variant~="content-wrapper-compat"][data-container="wrapper"] .section__content {
    /* No constraints on content - let children handle their own layout */
    width: 100%;
  }

  /* wrapper-wide: wider container for expansive layouts */
  [data-clean-root="true"] .section[data-variant~="wrapper-wide"][data-container="wrapper"] {
    --wrapper-max: var(--rail-wide);  /* 1400px */
    --wrapper-gutter: clamp(40px, 4vw, 72px);
  }

  /* wrapper-prose: narrow measure for long-form content */
  [data-clean-root="true"] .section[data-variant~="wrapper-prose"][data-container="wrapper"] {
    --wrapper-max: var(--rail-prose);  /* 65ch */
    --wrapper-gutter: clamp(24px, 3vw, 48px);
  }

  /* wrapper-full: edge-to-edge (no max-width) with minimal gutter */
  [data-clean-root="true"] .section[data-variant~="wrapper-full"][data-container="wrapper"] {
    --wrapper-max: none;
    --wrapper-gutter: clamp(16px, 2vw, 32px);
  }

  /* wrapper-tight: tighter gutter for compact sections */
  [data-clean-root="true"] .section[data-variant~="wrapper-tight"][data-container="wrapper"] {
    --wrapper-gutter: clamp(24px, 3vw, 48px);
  }

  /* --------------------------------------
     RESPONSIVE ADJUSTMENTS
  --------------------------------------- */

  /* Reduce gutter on mobile for wrapper mode */
  @media (max-width: 768px) {
    [data-clean-root="true"] .section[data-container="wrapper"] {
      --wrapper-gutter: clamp(24px, 4vw, 48px);
    }
  }

  @media (max-width: 480px) {
    [data-clean-root="true"] .section[data-container="wrapper"] {
      --wrapper-gutter: clamp(16px, 3vw, 32px);
    }
  }

} /* End @layer components */
